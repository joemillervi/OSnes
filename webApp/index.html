<script src="http://cdn.dashjs.org/latest/dash.all.min.js"></script>
<script src="https://cdn.webrtc-experiment.com/MediaStreamRecorder.js"> </script>
<body>
   <div>
       <!-- <video data-dashjs-player autoplay src="http://dash.edgesuite.net/envivio/EnvivioDash3/manifest.mpd" controls></video> -->
       <!doctype html>
       <video id="player" autoplay="true"></video>
       <!-- <video class="player" autoplay style="width:40%;"></video> -->
   </div>
   <style>

body {
margin: 0px;
padding: 0px;
}

#player {
width: 50%;
height: 50%;
}
   </style>
   <script>
       var mediaOptions = { audio: false, video: true };

       if (!navigator.getUserMedia) {
           navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
       }

       if (!navigator.getUserMedia){
          alert('getUserMedia not supported in this browser.');
       }

       navigator.getUserMedia(mediaOptions, success, function(e) {
         console.log(e);
       });

       function success(stream){
         // stream to webcam
         var video = document.querySelector("#player");
         video.src = window.URL.createObjectURL(stream);
         // fetch blob data
         var mediaRecorder = new MediaStreamRecorder(stream);
         mediaRecorder.mimeType = 'video/webm';

         // for gif recording
         // mediaRecorder.mimeType = 'image/gif';

         mediaRecorder.width = 320;
         mediaRecorder.height = 240;

         mediaRecorder.ondataavailable = function (blob) {
             // POST/PUT "Blob" using FormData/XHR2
              console.log(blob)
              var blobURL = URL.createObjectURL(blob);
              // extract data from blob url
              var xhr = new XMLHttpRequest;
              xhr.responseType = 'blob';

              xhr.onload = function() {
                 var recoveredBlob = xhr.response;
                 console.log(recoveredBlob)

                 var reader = new FileReader;

                 reader.onload = function() {
                   var blobAsDataUrl = reader.result;
                   console.log(blobAsDataUrl.slice(0, 100))
                 };

                 reader.readAsDataURL(recoveredBlob);
              };

              xhr.open('GET', blobURL);
              xhr.send();
         };
         mediaRecorder.start(1000);
       }


    // fetch data blob
   </script>
</body>
